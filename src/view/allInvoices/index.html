<section v-loading="isPrinting" element-loading-text="请求打印中">
  <div style="margin-bottom:20px;">
    <el-row>
      <el-col :span="14">
      <el-button type="primary" @click="batchPrint" :disabled="isPrinting" style="margin-bottom:70px;"><i class="fa fa-print"></i> 批量打印</el-button>
      <el-form :inline="true">
        <el-form-item label="审批人">
          <el-input v-model="createName" placeholder="报销人"></el-input>
        </el-form-item>
        <el-form-item>
          <el-button type="primary" @click="handleSearch"><i class="fa fa-seatch"></i> 确定</el-button>
        </el-form-item>
      </el-form>

      </el-col>
      <el-col :span="10">
      <table class="table table-bordered table-condensed">
        <tbody>
          <tr>
            <th>服务到期时间</th>
            <td>{{contract.payEndTime|slice(0, 10) || '-'}}</td>
          </tr>
          <tr>
            <th>本月可使用发票额度</th>
            <td>{{contract.monthUpperLimit || '-'}}</td>
          </tr>
          <tr>
            <th>本月已使用发票额度</th>
            <td>{{contract.use || '-'}}</td>
          </tr>
        </tbody>
      </table>
      </el-col>
    </el-row>
  </div>
  <table class="table" v-loading="isLoading" element-loading-text="数据请求中">
    <thead>
      <tr>
        <th>
          <el-checkbox :value="checkedAll" @click.prevent.native="handleCheckAll">全选</el-checkbox>
        </th>
        <th>名称</th>
        <th>报销人</th>
        <th>金额</th>
        <th>发票状态</th>
        <th>开票时间</th>
        <th>上传时间</th>
        <th>操作</th>
      </tr>
    </thead>
    <tbody>
      <tr v-if="data.length" v-for="item in data" key="item.id">
        <td>
          <el-checkbox :value="checkedIds.indexOf(item.id)>=0" @change="handleCheck(item.id)"></el-checkbox>
        </td>
        <td>{{item.salesName}}</td>
        <td>{{item.createName.name}}</td>
        <td>{{item.sumWithTax}}</td>
        <td>
          <span v-if="item.fpHandleStatus=='0'">查验中</span>
          <span v-else-if="item.fpHandleStatus=='1'">查验失败</span>
          <span v-else-if="item.fpHandleStatus=='2'">未打印</span>
          <span v-else-if="item.fpHandleStatus=='3'">已打印</span>
        </td>
        <td>{{item.fpDate}}</td>
        <td>{{item.createDate}}</td>
        <td>
          <el-button type="text" v-if="item.fpHandleStatus=='2'" href="javascript:;" @click="singlePrint(item)" :disabled="isPrinting">
            <i class="fa fa-print"></i> 打印
          </el-button>
          <el-button v-else type="text" style="color:#a7daff" href="javascript:;" @click="againSinglePrint(item)" :disabled="isPrinting">
            <i class="fa fa-print"></i> 打印
          </el-button>
        </td>
      </tr>
      <tr v-if="!data.length&&!isLoading">
        <td colspan="8" style="text-align:center;padding:50px 0">无数据</td>
      </tr>
    </tbody>
  </table>
  <el-pagination
    style="float:right"
    v-if="data.length"
    @current-change="onChange"
    :current-page.sync="pageNo"
    :page-size="pageSize"
    layout="total, prev, pager, next"
    :total="total">
  </el-pagination>

  <iframe style="height:100px;width:100%;opacity:0" ref="iframe"></iframe>
</section>